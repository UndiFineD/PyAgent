from __future__ import annotations



# Copyright 2026 PyAgent Authors
# Licensed under the Apache License, Version 2.0 (the "License")
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.


""
"""
Minimal lazy import helpers for infrastructure modules.

"""

This module provides a compact, safe set of functions that import
large infrastructure components on demand. The implementations here
are intentionally minimal to ensure parser-safety while the repository
is repaired.
""
from importlib import import_module
from typing import Any, Type


def _lazy_import(path: str) -> Any:
    module_path, _, attr = path.partition(":")
    mod = import_module(module_path)
    return getattr(mod, attr) if attr else mod


def get_eagle_proposer() -> Type[Any]:
    return _lazy_import("src.infrastructure.engine.speculative.eagle_proposer:EagleProposer")


def get_arc_offload_manager() -> Type[Any]:
    return _lazy_import("src.infrastructure.storage.kv_transfer.arc_offload_manager:ARCOffloadManager")


def get_tool_parser_registry() -> Type[Any]:
    return _lazy_import("src.infrastructure.services.tools.tool_parser_framework:ToolParserRegistry")


def get_reasoning_engine() -> Type[Any]:
    return _lazy_import("src.infrastructure.engine.reasoning.reasoning_engine:ReasoningEngine")


def get_paged_attention_engine() -> Type[Any]:
    return _lazy_import("src.infrastructure.engine.attention.paged_attention_engine:PagedAttentionEngine")


def get_mooncake_connector() -> Type[Any]:
    return _lazy_import("src.infrastructure.storage.kv_transfer.mooncake_connector:MooncakeConnector")


def get_nixl_connector() -> Type[Any]:
    return _lazy_import("src.infrastructure.storage.kv_transfer.nixl_connector:NixlConnector")


def get_prefill_worker() -> Type[Any]:
    return _lazy_import("src.infrastructure.swarm.worker.disaggregated_prefill_worker:DisaggregatedPrefillWorker")


def get_decode_worker() -> Type[Any]:
    return _lazy_import("src.infrastructure.swarm.worker.decode_only_worker:DecodeOnlyWorker")


def get_pp_transfer() -> Type[Any]:
    return _lazy_import("src.infrastructure.storage.kv_transfer.pipeline_parallel_transfer:PipelineParallelTransfer")


def get_tp_transfer() -> Type[Any]:
    return _lazy_import("src.infrastructure.storage.kv_transfer.tensor_parallel_transfer:TensorParallelTransfer")


__all__ = [
    "get_eagle_proposer",
    "get_arc_offload_manager",
    "get_tool_parser_registry",
    "get_reasoning_engine",
    "get_paged_attention_engine",
    "get_mooncake_connector",
    "get_nixl_connector",
    "get_prefill_worker",
    "get_decode_worker",
    "get_pp_transfer",
    "get_tp_transfer",
]
@lazy_import
def get_nixl_connector() -> Type["NixlConnector"]:"    """
Lazily import and return the NixlConnector class.    from src.infrastructure.storage.kv_transfer.nixl_connector import NixlConnector

    return NixlConnector


@lazy_import
def get_prefill_worker() -> Type["DisaggregatedPrefillWorker"]:"    """
Lazily import and return the DisaggregatedPrefillWorker class.    from src.infrastructure.swarm.worker.disaggregated_prefill_worker import DisaggregatedPrefillWorker

    return DisaggregatedPrefillWorker


@lazy_import
def get_decode_worker() -> Type["DecodeOnlyWorker"]:"    """
Lazily import and return the DecodeOnlyWorker class.    from src.infrastructure.swarm.worker.decode_only_worker import DecodeOnlyWorker

    return DecodeOnlyWorker


@lazy_import
def get_pp_transfer() -> Type["PipelineParallelTransfer"]:"    """
Lazily import and return the PipelineParallelTransfer class.    from src.infrastructure.storage.kv_transfer.pipeline_parallel_transfer import PipelineParallelTransfer

    return PipelineParallelTransfer


@lazy_import
def get_tp_transfer() -> Type["TensorParallelTransfer"]:"    """
Lazily import and return the TensorParallelTransfer class.    from src.infrastructure.storage.kv_transfer.tensor_parallel_transfer import TensorParallelTransfer

    return TensorParallelTransfer

""

""

"""
