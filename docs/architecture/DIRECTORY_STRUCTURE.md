# PyAgent Directory Structure & Functional Mapping

This document provides a high-level mapping of the `src/` directory to the functional domains of the PyAgent swarm.

## üìÇ `src/` Root
The codebase is organized into vertical slices of functionality, ensuring high cohesion and loose coupling.

### üß† `src/core/` - The Brain
- **`agents/`**: Implementations of specialized agents (Coder, Analyst, Architect). Now includes the **`UniversalAgent`** shell.
- **`base/`**: The foundation of all agents.
  - **`mixins/`**: Reusable behavioral traits (Identity, Knowledge, Persistence, Reflection).
  - **`logic/`**: The algorithmic "Cores" that handle heavy computation (Evolution, Guardrails, Memory, Reasoning).
  - **`models/`**: Pydantic models for data exchange, AgentCards, and task definitions.
- **`config/`**: Global configuration management and environment loading.

### üèéÔ∏è `src/infrastructure/` - The Body
- **`engine/`**: The lower-level inference engine (vLLM-inspired). Includes Paged Attention, KVCache V2, and Speculative Decoding.
- **`swarm/`**: Orchestration logic for multi-node clusters. Includes Voyager (P2P), Fleet management, Zero-Trust Firewall, and Consensus (Raft/BFT).
- **`services/`**: Integration layers for external platforms (Cloud, MCP, Docker, OpenAI API).
- **`storage/`**: Persistence layers for memory, logs, and state snapshots.
- **`security/`**: Sandboxing, network isolation, and credential management.

### ü¶Ä `rust_lib/` - The Core Accelerator
- **`src/`**: Performance-critical Rust implementations.
- **Capabilities**: Block hashing for KV cache, Blake3 message signing, and high-frequency metrics pooling.

### üìÑ `data/` - The Swarm State
- **`manifests/`**: JSON logic definitions for the Universal Agent shell.
- **`agent_registry.json`**: Dynamic mapping of available agent shards in the mesh.
- **`config/`**: YAML/JSON configuration files for the swarm topology.

### üõ†Ô∏è `src/tools/` - The Hands
- **`evolved/`**: Tools that have been automatically optimized or generated by the swarm.
- **MCP Tools**: Dynamic tool loading via the Model Context Protocol.

### üìä `src/observability/` - The Senses
- **`telemetry/`**: High-throughput metrics aggregation.
- **`tracing/`**: Distributed tracing of agent reasoning chains.
- **`logging/`**: Structured logging (Loguru) with automated cleanup.

### üñ•Ô∏è `src/interface/` - The Voice
- **`cli/`**: TUI (Terminal User Interface) and standard CLI entry points.
- **`web/` / `gui/` / `mobile/`**: Front-end applications for human-agent interaction.

### üßπ `src/maintenance/` - The Immune System
- **`artifact_cleanup.py`**: Background workers for purging stale logs and multimodal artifacts.
- **Self-Repair**: Logic for identifying and fixing silent failures in the swarm.

---
*PyAgent v4.4.0-VOYAGER Architecture*
