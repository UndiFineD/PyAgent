diff --git a/tests/unit/logic/test_coder_CORE_UNIT.py b/tests/unit/logic/test_coder_CORE_UNIT.py
index 41f3f49..9a9f487 100644
--- a/tests/unit/logic/test_coder_CORE_UNIT.py
+++ b/tests/unit/logic/test_coder_CORE_UNIT.py
@@ -2,6 +2,15 @@
 """Test classes from test_agent_coder.py - core module."""
 
 from __future__ import annotations
+from src.core.base.types.AccessibilityIssue import AccessibilityIssue
+from src.core.base.types.AccessibilityIssueType import AccessibilityIssueType
+from src.core.base.types.AccessibilityReport import AccessibilityReport
+from src.core.base.types.AccessibilitySeverity import AccessibilitySeverity
+from src.core.base.types.ARIAAttribute import ARIAAttribute
+from src.core.base.types.ColorContrastResult import ColorContrastResult
+from src.core.base.types.WCAGLevel import WCAGLevel
+from src.logic.agents.development.AccessibilityAgent import AccessibilityAgent
+
 from _thread import LockType
 from _thread import LockType
 import unittest
@@ -39,23 +48,30 @@ except ImportError:
 
 # Import from src if needed
 
+@pytest.fixture(autouse=True)
+def mock_rust_core(monkeypatch: pytest.MonkeyPatch) -> None:
+    """Mock rust_core for all tests in this module."""
+    mock = MagicMock()
+    mock.CoderCore = MagicMock(return_value=MagicMock())
+    monkeypatch.setitem(sys.modules, "rust_core", mock)
+
 class TestAccessibilityIssueTypeEnum:
     """Tests for AccessibilityIssueType enum."""
 
     def test_enum_values(self) -> None:
         """Test enum has expected values."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        assert mod.AccessibilityIssueType.MISSING_ALT_TEXT.value == "missing_alt_text"
-        assert mod.AccessibilityIssueType.LOW_COLOR_CONTRAST.value == "low_color_contrast"
-        assert mod.AccessibilityIssueType.MISSING_LABEL.value == "missing_label"
-        assert mod.AccessibilityIssueType.KEYBOARD_NAVIGATION.value == "keyboard_navigation"
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        assert AccessibilityIssueType.MISSING_ALT_TEXT.value == "missing_alt_text"
+        assert AccessibilityIssueType.LOW_COLOR_CONTRAST.value == "low_color_contrast"
+        assert AccessibilityIssueType.MISSING_LABEL.value == "missing_label"
+        assert AccessibilityIssueType.KEYBOARD_NAVIGATION.value == "keyboard_navigation"
 
     def test_all_members(self) -> None:
         """Test all enum members exist."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        members: List[Any] = list(mod.AccessibilityIssueType)
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        members: List[Any] = list(AccessibilityIssueType)
         assert len(members) == 10
 
 
@@ -66,19 +82,19 @@ class TestAccessibilitySeverityEnum:
     def test_enum_values(self) -> None:
         """Test enum has expected values."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        assert mod.AccessibilitySeverity.CRITICAL.value == 4
-        assert mod.AccessibilitySeverity.SERIOUS.value == 3
-        assert mod.AccessibilitySeverity.MODERATE.value == 2
-        assert mod.AccessibilitySeverity.MINOR.value == 1
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        assert AccessibilitySeverity.CRITICAL.value == 4
+        assert AccessibilitySeverity.SERIOUS.value == 3
+        assert AccessibilitySeverity.MODERATE.value == 2
+        assert AccessibilitySeverity.MINOR.value == 1
 
     def test_severity_ordering(self) -> None:
         """Test severity values are ordered correctly."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        assert mod.AccessibilitySeverity.MINOR.value < mod.AccessibilitySeverity.MODERATE.value
-        assert mod.AccessibilitySeverity.MODERATE.value < mod.AccessibilitySeverity.SERIOUS.value
-        assert mod.AccessibilitySeverity.SERIOUS.value < mod.AccessibilitySeverity.CRITICAL.value
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        assert AccessibilitySeverity.MINOR.value < AccessibilitySeverity.MODERATE.value
+        assert AccessibilitySeverity.MODERATE.value < AccessibilitySeverity.SERIOUS.value
+        assert AccessibilitySeverity.SERIOUS.value < AccessibilitySeverity.CRITICAL.value
 
 
 
@@ -88,16 +104,16 @@ class TestWCAGLevelEnum:
     def test_enum_values(self) -> None:
         """Test enum has expected values."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        assert mod.WCAGLevel.A.value == "A"
-        assert mod.WCAGLevel.AA.value == "AA"
-        assert mod.WCAGLevel.AAA.value == "AAA"
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        assert WCAGLevel.A.value == "A"
+        assert WCAGLevel.AA.value == "AA"
+        assert WCAGLevel.AAA.value == "AAA"
 
     def test_all_levels(self) -> None:
         """Test all WCAG levels exist."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        assert len(list(mod.WCAGLevel)) == 3
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        assert len(list(WCAGLevel)) == 3
 
 
 
@@ -107,29 +123,29 @@ class TestAccessibilityIssueDataclass:
     def test_creation(self) -> None:
         """Test creating AccessibilityIssue."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        issue = mod.AccessibilityIssue(
-            issue_type=mod.AccessibilityIssueType.MISSING_ALT_TEXT,
-            severity=mod.AccessibilitySeverity.CRITICAL,
-            wcag_level=mod.WCAGLevel.A,
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        issue = AccessibilityIssue(
+            issue_type=AccessibilityIssueType.MISSING_ALT_TEXT,
+            severity=AccessibilitySeverity.CRITICAL,
+            wcag_level=WCAGLevel.A,
             wcag_criterion="1.1.1",
             description="Image missing alt",
             element="<img src='test.jpg'>",
             line_number=10,
             suggested_fix="Add alt attribute"
         )
-        assert issue.issue_type == mod.AccessibilityIssueType.MISSING_ALT_TEXT
-        assert issue.severity == mod.AccessibilitySeverity.CRITICAL
+        assert issue.issue_type == AccessibilityIssueType.MISSING_ALT_TEXT
+        assert issue.severity == AccessibilitySeverity.CRITICAL
         assert issue.line_number == 10
 
     def test_defaults(self) -> None:
         """Test AccessibilityIssue defaults."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        issue = mod.AccessibilityIssue(
-            issue_type=mod.AccessibilityIssueType.ARIA_MISSING,
-            severity=mod.AccessibilitySeverity.MODERATE,
-            wcag_level=mod.WCAGLevel.AA,
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        issue = AccessibilityIssue(
+            issue_type=AccessibilityIssueType.ARIA_MISSING,
+            severity=AccessibilitySeverity.MODERATE,
+            wcag_level=WCAGLevel.AA,
             wcag_criterion="4.1.2",
             description="Missing ARIA",
             element="button"
@@ -146,8 +162,8 @@ class TestColorContrastResultDataclass:
     def test_creation(self) -> None:
         """Test creating ColorContrastResult."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        result = mod.ColorContrastResult(
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        result = ColorContrastResult(
             foreground="#000000",
             background="#FFFFFF",
             contrast_ratio=21.0,
@@ -166,12 +182,12 @@ class TestAccessibilityReportDataclass:
     def test_creation(self) -> None:
         """Test creating AccessibilityReport."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        report = mod.AccessibilityReport(
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        report = AccessibilityReport(
             file_path="test.html",
             issues=[],
             total_elements=10,
-            wcag_level=mod.WCAGLevel.AA,
+            wcag_level=WCAGLevel.AA,
             compliance_score=95.0,
             critical_count=0,
             serious_count=1
@@ -182,8 +198,8 @@ class TestAccessibilityReportDataclass:
     def test_defaults(self) -> None:
         """Test AccessibilityReport defaults."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        report = mod.AccessibilityReport(file_path="test.html")
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        report = AccessibilityReport(file_path="test.html")
         assert report.issues == []
         assert report.total_elements == 0
         assert report.compliance_score == 100.0
@@ -196,8 +212,8 @@ class TestARIAAttributeDataclass:
     def test_creation(self) -> None:
         """Test creating ARIAAttribute."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        attr = mod.ARIAAttribute(
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        attr = ARIAAttribute(
             name="aria-label",
             value="Submit button",
             is_valid=True
@@ -214,83 +230,83 @@ class TestAccessibilityAnalyzer:
     def test_initialization(self) -> None:
         """Test AccessibilityAnalyzer initialization."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer(mod.WCAGLevel.AA)
-        assert analyzer.target_level == mod.WCAGLevel.AA
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent(WCAGLevel.AA)
+        assert analyzer.target_level == WCAGLevel.AA
         assert analyzer.issues == []
 
     def test_analyze_html_missing_alt(self) -> None:
         """Test detecting missing alt text in HTML."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         html_content = '<html><body><img src="test.jpg"></body></html>'
         report = analyzer.analyze_content(html_content, "html")
         alt_issues: List[Any] = [i for i in report.issues
-                      if i.issue_type == mod.AccessibilityIssueType.MISSING_ALT_TEXT]
+                      if i.issue_type == AccessibilityIssueType.MISSING_ALT_TEXT]
         assert len(alt_issues) > 0
 
     def test_analyze_html_with_alt(self) -> None:
         """Test HTML with proper alt text has no alt issues."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         html_content = '<html><body><img src="test.jpg" alt="Test image"></body></html>'
         report = analyzer.analyze_content(html_content, "html")
         alt_issues: List[Any] = [i for i in report.issues
-                      if i.issue_type == mod.AccessibilityIssueType.MISSING_ALT_TEXT]
+                      if i.issue_type == AccessibilityIssueType.MISSING_ALT_TEXT]
         assert len(alt_issues) == 0
 
     def test_analyze_html_missing_label(self) -> None:
         """Test detecting missing form labels in HTML."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         html_content = '<html><body><input type="text" id="name"></body></html>'
         report = analyzer.analyze_content(html_content, "html")
         label_issues: List[Any] = [i for i in report.issues
-                        if i.issue_type == mod.AccessibilityIssueType.MISSING_LABEL]
+                        if i.issue_type == AccessibilityIssueType.MISSING_LABEL]
         assert len(label_issues) > 0
 
     def test_analyze_html_heading_hierarchy(self) -> None:
         """Test detecting heading hierarchy issues."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         # Page starts with h2 instead of h1
         html_content = '<html><body><h2>Title</h2></body></html>'
         report = analyzer.analyze_content(html_content, "html")
         heading_issues: List[Any] = [i for i in report.issues
-                          if i.issue_type == mod.AccessibilityIssueType.HEADING_HIERARCHY]
+                          if i.issue_type == AccessibilityIssueType.HEADING_HIERARCHY]
         assert len(heading_issues) > 0
 
     def test_analyze_javascript_click_without_keyboard(self) -> None:
         """Test detecting click handlers without keyboard support."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         js_content = '<button onClick={handleClick}>Click me</button>'
         report = analyzer.analyze_content(js_content, "javascript")
         keyboard_issues: List[Any] = [i for i in report.issues
-                           if i.issue_type == mod.AccessibilityIssueType.KEYBOARD_NAVIGATION]
+                           if i.issue_type == AccessibilityIssueType.KEYBOARD_NAVIGATION]
         assert len(keyboard_issues) > 0
 
     def test_analyze_javascript_interactive_div(self) -> None:
         """Test detecting interactive divs without proper roles."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         js_content = '<div onClick={handleClick}>Clickable</div>'
         report = analyzer.analyze_content(js_content, "javascript")
         semantic_issues: List[Any] = [i for i in report.issues
-                           if i.issue_type == mod.AccessibilityIssueType.SEMANTIC_HTML]
+                           if i.issue_type == AccessibilityIssueType.SEMANTIC_HTML]
         assert len(semantic_issues) > 0
 
     def test_check_color_contrast_high(self) -> None:
         """Test color contrast check with high contrast."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         result = analyzer.check_color_contrast("#000000", "#FFFFFF")
         assert result.contrast_ratio == 21.0
         assert result.passes_aa is True
@@ -299,16 +315,16 @@ class TestAccessibilityAnalyzer:
     def test_check_color_contrast_low(self) -> None:
         """Test color contrast check with low contrast."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         result = analyzer.check_color_contrast("#777777", "#999999")
         assert result.passes_aa is False
 
     def test_check_color_contrast_large_text(self) -> None:
         """Test color contrast check with large text requirements."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         result = analyzer.check_color_contrast("#555555", "#FFFFFF", is_large_text=True)
         # Large text has lower requirements (3:1 for AA)
         assert result.min_ratio_aa == 3.0
@@ -316,31 +332,31 @@ class TestAccessibilityAnalyzer:
     def test_get_issues_by_severity(self) -> None:
         """Test filtering issues by severity."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         html_content = '<html><body><img src="test.jpg"></body></html>'
         analyzer.analyze_content(html_content, "html")
         critical_issues = analyzer.get_issues_by_severity(
-            mod.AccessibilitySeverity.CRITICAL
+            AccessibilitySeverity.CRITICAL
         )
-        assert all(i.severity == mod.AccessibilitySeverity.CRITICAL
+        assert all(i.severity == AccessibilitySeverity.CRITICAL
                    for i in critical_issues)
 
     def test_get_issues_by_wcag_level(self) -> None:
         """Test filtering issues by WCAG level."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         html_content = '<html><body><img src="test.jpg"></body></html>'
         analyzer.analyze_content(html_content, "html")
-        level_a_issues = analyzer.get_issues_by_wcag_level(mod.WCAGLevel.A)
-        assert all(i.wcag_level == mod.WCAGLevel.A for i in level_a_issues)
+        level_a_issues = analyzer.get_issues_by_wcag_level(WCAGLevel.A)
+        assert all(i.wcag_level == WCAGLevel.A for i in level_a_issues)
 
     def test_enable_disable_rules(self) -> None:
         """Test enabling and disabling rules."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         analyzer.disable_rule("1.1.1")
         assert analyzer.rules.get("1.1.1") is False
         analyzer.enable_rule("1.1.1")
@@ -349,8 +365,8 @@ class TestAccessibilityAnalyzer:
     def test_compliance_score_calculation(self) -> None:
         """Test compliance score is calculated correctly."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         # Clean HTML should have high score
         html_content = '''
         <html>
@@ -368,8 +384,8 @@ class TestAccessibilityAnalyzer:
     def test_analyze_file_nonexistent(self, tmp_path: Path) -> None:
         """Test analyzing nonexistent file returns empty report."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         report = analyzer.analyze_file(str(tmp_path / "nonexistent.html"))
         assert report.issues == []
         assert report.compliance_score == 100.0
@@ -377,18 +393,18 @@ class TestAccessibilityAnalyzer:
     def test_analyze_file_html(self, tmp_path: Path) -> None:
         """Test analyzing HTML file."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
         html_file: Path = tmp_path / "test.html"
         html_file.write_text('<html><body><img src="x.jpg"></body></html>')
-        analyzer = mod.AccessibilityAnalyzer()
+        analyzer = AccessibilityAgent()
         report = analyzer.analyze_file(str(html_file))
         assert len(report.issues) > 0
 
     def test_analyze_python_ui(self) -> None:
         """Test analyzing Python UI code."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         python_content = '''
 from tkinter import Button, Label
 button=Button(root, text="Click")
@@ -400,8 +416,8 @@ label=Label(root, text="Info")
     def test_recommendations_generated(self) -> None:
         """Test that recommendations are generated."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
-        analyzer = mod.AccessibilityAnalyzer()
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
+        analyzer = AccessibilityAgent()
         html_content = '<html><body><img src="test.jpg"></body></html>'
         report = analyzer.analyze_content(html_content, "html")
         # Should have recommendations for critical issues
@@ -420,7 +436,7 @@ class TestCodeRefactoring:
     def test_detect_refactoring_opportunity(self, tmp_path: Path) -> None:
         """Test detecting refactoring opportunities."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
 
         code = """
 def process(data) -> str:
@@ -442,7 +458,7 @@ def process(data) -> str:
     def test_suggest_simplification(self, tmp_path: Path) -> None:
         """Test suggesting code simplification."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
 
         code = "x=True if condition else False"
         target: Path = tmp_path / "test.py"
@@ -466,16 +482,17 @@ class TestMultiLanguageCodeGeneration:
     def test_generate_python_code(self, tmp_path: Path) -> None:
         """Test generating Python code."""
         with agent_dir_on_path():
-            mod: sys.ModuleType = load_agent_module("coder/code_generator.py")
+            mod: sys.ModuleType = load_agent_module("src/logic/agents/development/CoderAgent.py")
 
         target: Path = tmp_path / "test.py"
         target.write_text("# Python code")
+        code = target.read_text()
         try:
             compile(code, "<string>", "exec")
             is_valid = True
         except (SyntaxError, IndentationError):
             is_valid = False
-        assert not is_valid
+        assert is_valid
 
 
 
@@ -729,6 +746,7 @@ class TestLargeFileHandling(unittest.TestCase):
         try:
             line_count = 0
             with open(fname) as f:
+                for _ in f:
                     line_count += 1
             assert line_count == 1000
         finally:
